(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"02e1b796fa21d55bb000":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("c52e0ee7ccfeb64f9cf6"),i=n.OPS;function s(e){const t=n.compile(e);return t.length>1&&t[0]===i.OP_RETURN}t.check=s,s.toJSON=(()=>"null data output");const o={check:s};t.output=o},"08030d8a45f1cae3f1b1":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e,t,r){t=t||4,r=void 0===r||r;const n=e.length;if(0===n)return 0;if(n>t)throw new TypeError("Script number overflow");if(r&&0===(127&e[n-1])&&(n<=1||0===(128&e[n-2])))throw new Error("Non-minimally encoded script number");if(5===n){const t=e.readUInt32LE(0),r=e.readUInt8(4);return 128&r?-(4294967296*(-129&r)+t):4294967296*r+t}let i=0;for(let t=0;t<n;++t)i|=e[t]<<8*t;return 128&e[n-1]?-(i&~(128<<8*(n-1))):i},t.encode=function(t){let r=Math.abs(t);const n=(i=r)>2147483647?5:i>8388607?4:i>32767?3:i>127?2:i>0?1:0;var i;const s=e.allocUnsafe(n),o=t<0;for(let e=0;e<n;++e)s.writeUInt8(255&r,e),r>>=8;return 128&s[n-1]?s.writeUInt8(o?128:0,n-1):o&&(s[n-1]|=128),s}}).call(this,r("3be624f7e9dc58942c52").Buffer)},"12fc7dc108ee22ef249d":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("30cac4907ab3e1f14fb6");t.input=n;const i=r("79f3a97e0c3a3c140749");t.output=i},"20a0049eaa138cdc1fa2":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("c52e0ee7ccfeb64f9cf6"),i=r("989ba8f7d369b0d9568d"),s=r("02e1b796fa21d55bb000"),o=r("8a06de8a113371251a5d"),u=r("12fc7dc108ee22ef249d"),c=r("be8a53eb8cb69afa8539"),a=r("a7f571aaad544c0a1b11"),p=r("659a4e58bd908ef31801"),h=r("647d842e21953e5606d8"),f={P2MS:"multisig",NONSTANDARD:"nonstandard",NULLDATA:"nulldata",P2PK:"pubkey",P2PKH:"pubkeyhash",P2SH:"scripthash",P2WPKH:"witnesspubkeyhash",P2WSH:"witnessscripthash",WITNESS_COMMITMENT:"witnesscommitment"};t.types=f,t.output=function(e){if(p.output.check(e))return f.P2WPKH;if(h.output.check(e))return f.P2WSH;if(u.output.check(e))return f.P2PKH;if(c.output.check(e))return f.P2SH;const t=n.decompile(e);if(!t)throw new TypeError("Invalid script");return i.output.check(t)?f.P2MS:o.output.check(t)?f.P2PK:a.output.check(t)?f.WITNESS_COMMITMENT:s.output.check(t)?f.NULLDATA:f.NONSTANDARD},t.input=function(e,t){const r=n.decompile(e);if(!r)throw new TypeError("Invalid script");return u.input.check(r)?f.P2PKH:c.input.check(r,t)?f.P2SH:i.input.check(r,t)?f.P2MS:o.input.check(r)?f.P2PK:f.NONSTANDARD},t.witness=function(e,t){const r=n.decompile(e);if(!r)throw new TypeError("Invalid script");return p.input.check(r)?f.P2WPKH:h.input.check(r,t)?f.P2WSH:f.NONSTANDARD}},"247180d06ad5f0d3ae5f":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const n=r("928311dc04c6002b08e8"),i=r("8181d1a037f7ee7c0bf5"),s=r("c52e0ee7ccfeb64f9cf6"),o=r("3b58bc5d4fd32db48dd3"),u=r("eb43aa378b3d50eaa0db"),c=r("53ead306b62e35ae6518"),a=r("4982e4a9d5d9cc0006c5");function p(e){const t=c.decode(e);if(t.length<21)throw new TypeError(e+" is too short");if(t.length>21)throw new TypeError(e+" is too long");return{version:t.readUInt8(0),hash:t.slice(1)}}function h(t){const r=u.decode(t),n=u.fromWords(r.words.slice(1));return{version:r.words[0],prefix:r.prefix,data:e.from(n)}}t.fromBase58Check=p,t.fromBech32=h,t.toBase58Check=function(t,r){a(o.tuple(o.Hash160bit,o.UInt8),arguments);const n=e.allocUnsafe(21);return n.writeUInt8(r,0),t.copy(n,1),c.encode(n)},t.toBech32=function(e,t,r){const n=u.toWords(e);return n.unshift(t),u.encode(r,n)},t.fromOutputScript=function(e,t){t=t||n.bitcoin;try{return i.p2pkh({output:e,network:t}).address}catch(e){}try{return i.p2sh({output:e,network:t}).address}catch(e){}try{return i.p2wpkh({output:e,network:t}).address}catch(e){}try{return i.p2wsh({output:e,network:t}).address}catch(e){}throw new Error(s.toASM(e)+" has no matching Address")},t.toOutputScript=function(e,t){let r,s;t=t||n.bitcoin;try{r=p(e)}catch(e){}if(r){if(r.version===t.pubKeyHash)return i.p2pkh({hash:r.hash}).output;if(r.version===t.scriptHash)return i.p2sh({hash:r.hash}).output}else{try{s=h(e)}catch(e){}if(s){if(s.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(0===s.version){if(20===s.data.length)return i.p2wpkh({hash:s.data}).output;if(32===s.data.length)return i.p2wsh({hash:s.data}).output}}}throw new Error(e+" has no matching Script")}}).call(this,r("3be624f7e9dc58942c52").Buffer)},"2d6e5edc7083b0a69b78":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("51c14598f89e3eb6cfa8");function i(e){try{return n("rmd160").update(e).digest()}catch(t){return n("ripemd160").update(e).digest()}}function s(e){return n("sha256").update(e).digest()}t.ripemd160=i,t.sha1=function(e){return n("sha1").update(e).digest()},t.sha256=s,t.hash160=function(e){return i(s(e))},t.hash256=function(e){return s(s(e))}},"30cac4907ab3e1f14fb6":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("c52e0ee7ccfeb64f9cf6");function i(e){const t=n.decompile(e);return 2===t.length&&n.isCanonicalScriptSignature(t[0])&&n.isCanonicalPubKey(t[1])}t.check=i,i.toJSON=(()=>"pubKeyHash input")},"3b58bc5d4fd32db48dd3":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("4982e4a9d5d9cc0006c5"),i=Math.pow(2,31)-1;function s(e){return n.String(e)&&!!e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}t.UInt31=function(e){return n.UInt32(e)&&e<=i},t.BIP32Path=s,s.toJSON=(()=>"BIP32 derivation path"),t.Signer=function(e){return(n.Buffer(e.publicKey)||"function"===typeof e.getPublicKey)&&"function"===typeof e.sign};const o=21e14;t.Satoshi=function(e){return n.UInt53(e)&&e<=o},t.ECPoint=n.quacksLike("Point"),t.Network=n.compile({messagePrefix:n.oneOf(n.Buffer,n.String),bip32:{public:n.UInt32,private:n.UInt32},pubKeyHash:n.UInt8,scriptHash:n.UInt8,wif:n.UInt8}),t.Buffer256bit=n.BufferN(32),t.Hash160bit=n.BufferN(20),t.Hash256bit=n.BufferN(32),t.Number=n.Number,t.Array=n.Array,t.Boolean=n.Boolean,t.String=n.String,t.Buffer=n.Buffer,t.Hex=n.Hex,t.maybe=n.maybe,t.tuple=n.tuple,t.UInt8=n.UInt8,t.UInt32=n.UInt32,t.Function=n.Function,t.BufferN=n.BufferN,t.Null=n.Null,t.oneOf=n.oneOf},"3ea3f4f10c55dd85e691":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const n=r("2d6e5edc7083b0a69b78"),i=r("928311dc04c6002b08e8"),s=r("c52e0ee7ccfeb64f9cf6"),o=r("a125ad20952ba4c10fe4"),u=r("4982e4a9d5d9cc0006c5"),c=s.OPS,a=r("53ead306b62e35ae6518");t.p2sh=function(t,r){if(!t.address&&!t.hash&&!t.output&&!t.redeem&&!t.input)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),u({network:u.maybe(u.Object),address:u.maybe(u.String),hash:u.maybe(u.BufferN(20)),output:u.maybe(u.BufferN(23)),redeem:u.maybe({network:u.maybe(u.Object),output:u.maybe(u.Buffer),input:u.maybe(u.Buffer),witness:u.maybe(u.arrayOf(u.Buffer))}),input:u.maybe(u.Buffer),witness:u.maybe(u.arrayOf(u.Buffer))},t);let p=t.network;p||(p=t.redeem&&t.redeem.network||i.bitcoin);const h={network:p},f=o.value(()=>{const e=a.decode(t.address);return{version:e.readUInt8(0),hash:e.slice(1)}}),d=o.value(()=>s.decompile(t.input)),l=o.value(()=>{const e=d();return{network:p,output:e[e.length-1],input:s.compile(e.slice(0,-1)),witness:t.witness||[]}});if(o.prop(h,"address",()=>{if(!h.hash)return;const t=e.allocUnsafe(21);return t.writeUInt8(h.network.scriptHash,0),h.hash.copy(t,1),a.encode(t)}),o.prop(h,"hash",()=>t.output?t.output.slice(2,22):t.address?f().hash:h.redeem&&h.redeem.output?n.hash160(h.redeem.output):void 0),o.prop(h,"output",()=>{if(h.hash)return s.compile([c.OP_HASH160,h.hash,c.OP_EQUAL])}),o.prop(h,"redeem",()=>{if(t.input)return l()}),o.prop(h,"input",()=>{if(t.redeem&&t.redeem.input&&t.redeem.output)return s.compile([].concat(s.decompile(t.redeem.input),t.redeem.output))}),o.prop(h,"witness",()=>h.redeem&&h.redeem.witness?h.redeem.witness:h.input?[]:void 0),o.prop(h,"name",()=>{const e=["p2sh"];return void 0!==h.redeem&&e.push(h.redeem.name),e.join("-")}),r.validate){let r=e.from([]);if(t.address){if(f().version!==p.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(20!==f().hash.length)throw new TypeError("Invalid address");r=f().hash}if(t.hash){if(r.length>0&&!r.equals(t.hash))throw new TypeError("Hash mismatch");r=t.hash}if(t.output){if(23!==t.output.length||t.output[0]!==c.OP_HASH160||20!==t.output[1]||t.output[22]!==c.OP_EQUAL)throw new TypeError("Output is invalid");const e=t.output.slice(2,22);if(r.length>0&&!r.equals(e))throw new TypeError("Hash mismatch");r=e}const i=e=>{if(e.output){const t=s.decompile(e.output);if(!t||t.length<1)throw new TypeError("Redeem.output too short");const i=n.hash160(e.output);if(r.length>0&&!r.equals(i))throw new TypeError("Hash mismatch");r=i}if(e.input){const t=e.input.length>0,r=e.witness&&e.witness.length>0;if(!t&&!r)throw new TypeError("Empty input");if(t&&r)throw new TypeError("Input and witness provided");if(t){const t=s.decompile(e.input);if(!s.isPushOnly(t))throw new TypeError("Non push-only scriptSig")}}};if(t.input){const t=d();if(!t||t.length<1)throw new TypeError("Input too short");if(!e.isBuffer(l().output))throw new TypeError("Input is invalid");i(l())}if(t.redeem){if(t.redeem.network&&t.redeem.network!==p)throw new TypeError("Network mismatch");if(t.input){const e=l();if(t.redeem.output&&!t.redeem.output.equals(e.output))throw new TypeError("Redeem.output mismatch");if(t.redeem.input&&!t.redeem.input.equals(e.input))throw new TypeError("Redeem.input mismatch")}i(t.redeem)}if(t.witness&&t.redeem&&t.redeem.witness&&!function(e,t){return e.length===t.length&&e.every((e,r)=>e.equals(t[r]))}(t.redeem.witness,t.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(h,t)}}).call(this,r("3be624f7e9dc58942c52").Buffer)},"53a0834872f8472c4ada":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const n=r("c52e0ee7ccfeb64f9cf6"),i=r("989ba8f7d369b0d9568d"),s=r("8a06de8a113371251a5d"),o=r("12fc7dc108ee22ef249d"),u=r("8b0c8f6bc1e2b4530d3c"),c=r("ebf61b4027142c40c33c");function a(t,r){const a=n.decompile(t);if(a.length<1)return!1;const p=a[a.length-1];if(!e.isBuffer(p))return!1;const h=n.decompile(n.compile(a.slice(0,-1))),f=n.decompile(p);return!!f&&(!!n.isPushOnly(h)&&(1===a.length?c.check(f)||u.check(f):!(!o.input.check(h)||!o.output.check(f))||(!(!i.input.check(h,r)||!i.output.check(f))||!(!s.input.check(h)||!s.output.check(f)))))}t.check=a,a.toJSON=(()=>"scriptHash input")}).call(this,r("3be624f7e9dc58942c52").Buffer)},"571d362cc5f59a8db748":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("c52e0ee7ccfeb64f9cf6");function i(e){const t=n.decompile(e);return 2===t.length&&n.isCanonicalScriptSignature(t[0])&&(r=t[1],n.isCanonicalPubKey(r)&&33===r.length);var r}t.check=i,i.toJSON=(()=>"witnessPubKeyHash input")},"5c1198e48f2c6e65e14b":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const n=r("beaf39890650aa5299f8"),i=r("2d6e5edc7083b0a69b78"),s=r("f49d9113a79536d617f0"),o=r("3b58bc5d4fd32db48dd3"),u=r("7b47a420ba8bead20f4a"),c=r("4982e4a9d5d9cc0006c5"),a=r("4a25c0f2b2142de6fa09"),p=new TypeError("Cannot compute merkle root for zero transactions"),h=new TypeError("Cannot compute witness commit for non-segwit block");class f{constructor(){this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}static fromBuffer(e){if(e.length<80)throw new Error("Buffer too small (< 80 bytes)");let t=0;const r=r=>(t+=r,e.slice(t-r,t)),n=()=>{const r=e.readUInt32LE(t);return t+=4,r},i=new f;if(i.version=(()=>{const r=e.readInt32LE(t);return t+=4,r})(),i.prevHash=r(32),i.merkleRoot=r(32),i.timestamp=n(),i.bits=n(),i.nonce=n(),80===e.length)return i;const o=()=>{const r=s.Transaction.fromBuffer(e.slice(t),!0);return t+=r.byteLength(),r},u=(()=>{const r=a.decode(e,t);return t+=a.decode.bytes,r})();i.transactions=[];for(let e=0;e<u;++e){const e=o();i.transactions.push(e)}const c=i.getWitnessCommit();return c&&(i.witnessCommit=c),i}static fromHex(t){return f.fromBuffer(e.from(t,"hex"))}static calculateTarget(t){const r=((4278190080&t)>>24)-3,n=8388607&t,i=e.alloc(32,0);return i.writeUIntBE(n,29-r,3),i}static calculateMerkleRoot(t,r){if(c([{getHash:o.Function}],t),0===t.length)throw p;if(r&&!d(t))throw h;const n=t.map(e=>e.getHash(r)),s=u(n,i.hash256);return r?i.hash256(e.concat([s,t[0].ins[0].witness[0]])):s}getWitnessCommit(){if(!d(this.transactions))return null;const t=this.transactions[0].outs.filter(t=>t.script.slice(0,6).equals(e.from("6a24aa21a9ed","hex"))).map(e=>e.script.slice(6,38));if(0===t.length)return null;const r=t[t.length-1];return r instanceof e&&32===r.length?r:null}hasWitnessCommit(){return this.witnessCommit instanceof e&&32===this.witnessCommit.length||null!==this.getWitnessCommit()}hasWitness(){return(e=this.transactions)instanceof Array&&e.some(e=>"object"===typeof e&&e.ins instanceof Array&&e.ins.some(e=>"object"===typeof e&&e.witness instanceof Array&&e.witness.length>0));var e}byteLength(e){return e||!this.transactions?80:80+a.encodingLength(this.transactions.length)+this.transactions.reduce((e,t)=>e+t.byteLength(),0)}getHash(){return i.hash256(this.toBuffer(!0))}getId(){return n.reverseBuffer(this.getHash()).toString("hex")}getUTCDate(){const e=new Date(0);return e.setUTCSeconds(this.timestamp),e}toBuffer(t){const r=e.allocUnsafe(this.byteLength(t));let n=0;const i=e=>{e.copy(r,n),n+=e.length},s=e=>{r.writeUInt32LE(e,n),n+=4};var o;return o=this.version,r.writeInt32LE(o,n),n+=4,i(this.prevHash),i(this.merkleRoot),s(this.timestamp),s(this.bits),s(this.nonce),t||!this.transactions?r:(a.encode(this.transactions.length,r,n),n+=a.encode.bytes,this.transactions.forEach(e=>{const t=e.byteLength();e.toBuffer(r,n),n+=t}),r)}toHex(e){return this.toBuffer(e).toString("hex")}checkTxRoots(){const e=this.hasWitnessCommit();return!(!e&&this.hasWitness())&&(this.__checkMerkleRoot()&&(!e||this.__checkWitnessCommit()))}checkProofOfWork(){const e=n.reverseBuffer(this.getHash()),t=f.calculateTarget(this.bits);return e.compare(t)<=0}__checkMerkleRoot(){if(!this.transactions)throw p;const e=f.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(e)}__checkWitnessCommit(){if(!this.transactions)throw p;if(!this.hasWitnessCommit())throw h;const e=f.calculateMerkleRoot(this.transactions,!0);return 0===this.witnessCommit.compare(e)}}function d(e){return e instanceof Array&&e[0]&&e[0].ins&&e[0].ins instanceof Array&&e[0].ins[0]&&e[0].ins[0].witness&&e[0].ins[0].witness instanceof Array&&e[0].ins[0].witness.length>0}t.Block=f}).call(this,r("3be624f7e9dc58942c52").Buffer)},"5d9e5db4b273f00a777d":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const n=r("c52e0ee7ccfeb64f9cf6"),i=r("c52e0ee7ccfeb64f9cf6"),s=r("3b58bc5d4fd32db48dd3"),o=r("4982e4a9d5d9cc0006c5"),u=e.from("aa21a9ed","hex");function c(e){const t=n.compile(e);return t.length>37&&t[0]===i.OPS.OP_RETURN&&36===t[1]&&t.slice(2,6).equals(u)}t.check=c,c.toJSON=(()=>"Witness commitment output"),t.encode=function(t){o(s.Hash256bit,t);const r=e.allocUnsafe(36);return u.copy(r,0),t.copy(r,4),n.compile([i.OPS.OP_RETURN,r])},t.decode=function(e){return o(c,e),n.decompile(e)[1].slice(4,36)}}).call(this,r("3be624f7e9dc58942c52").Buffer)},"5da7ca624d4d72bb8522":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const n=r("3b58bc5d4fd32db48dd3"),i=r("78631df91a52183a6424"),s=r("4982e4a9d5d9cc0006c5"),o=e.alloc(1,0);function u(t){let r=0;for(;0===t[r];)++r;return r===t.length?o:128&(t=t.slice(r))[0]?e.concat([o,t],1+t.length):t}function c(t){0===t[0]&&(t=t.slice(1));const r=e.alloc(32,0),n=Math.max(0,32-t.length);return t.copy(r,n),r}t.decode=function(t){const r=t.readUInt8(t.length-1),n=-129&r;if(n<=0||n>=4)throw new Error("Invalid hashType "+r);const s=i.decode(t.slice(0,-1)),o=c(s.r),u=c(s.s);return{signature:e.concat([o,u],64),hashType:r}},t.encode=function(t,r){s({signature:n.BufferN(64),hashType:n.UInt8},{signature:t,hashType:r});const o=-129&r;if(o<=0||o>=4)throw new Error("Invalid hashType "+r);const c=e.allocUnsafe(1);c.writeUInt8(r,0);const a=u(t.slice(0,32)),p=u(t.slice(32,64));return e.concat([i.encode(a,p),c])}}).call(this,r("3be624f7e9dc58942c52").Buffer)},"647d842e21953e5606d8":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("f21d93edd510689eb2ca");t.input=n;const i=r("ebf61b4027142c40c33c");t.output=i},"64ac9276262faec88968":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const n=r("928311dc04c6002b08e8"),i=r("3b58bc5d4fd32db48dd3"),s=r("8b82fb7b88c11c89712a"),o=r("dc10a1e1660f93ecd0a2"),u=r("4982e4a9d5d9cc0006c5"),c=r("14bbd16eca1d98192741"),a=u.maybe(u.compile({compressed:i.maybe(i.Boolean),network:i.maybe(i.Network)}));class p{constructor(e,t,r){this.__D=e,this.__Q=t,this.lowR=!1,void 0===r&&(r={}),this.compressed=void 0===r.compressed||r.compressed,this.network=r.network||n.bitcoin,void 0!==t&&(this.__Q=s.pointCompress(t,this.compressed))}get privateKey(){return this.__D}get publicKey(){return this.__Q||(this.__Q=s.pointFromScalar(this.__D,this.compressed)),this.__Q}toWIF(){if(!this.__D)throw new Error("Missing private key");return c.encode(this.network.wif,this.__D,this.compressed)}sign(t,r){if(!this.__D)throw new Error("Missing private key");if(void 0===r&&(r=this.lowR),!1===r)return s.sign(t,this.__D);{let r=s.sign(t,this.__D);const n=e.alloc(32,0);let i=0;for(;r[0]>127;)i++,n.writeUIntLE(i,0,6),r=s.signWithEntropy(t,this.__D,n);return r}}verify(e,t){return s.verify(e,this.publicKey,t)}}function h(e,t){if(u(i.Buffer256bit,e),!s.isPrivate(e))throw new TypeError("Private key not in range [1, n)");return u(a,t),new p(e,void 0,t)}t.fromPrivateKey=h,t.fromPublicKey=function(e,t){return u(s.isPoint,e),u(a,t),new p(void 0,e,t)},t.fromWIF=function(e,t){const r=c.decode(e),s=r.version;if(i.Array(t)){if(!(t=t.filter(e=>s===e.wif).pop()))throw new Error("Unknown network version")}else if(t=t||n.bitcoin,s!==t.wif)throw new Error("Invalid network version");return h(r.privateKey,{compressed:r.compressed,network:t})},t.makeRandom=function(e){u(a,e),void 0===e&&(e={});const t=e.rng||o;let r;do{r=t(32),u(i.Buffer256bit,r)}while(!s.isPrivate(r));return h(r,e)}}).call(this,r("3be624f7e9dc58942c52").Buffer)},"659a4e58bd908ef31801":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("571d362cc5f59a8db748");t.input=n;const i=r("8b0c8f6bc1e2b4530d3c");t.output=i},"765e5c44b6dae386e266":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("c52e0ee7ccfeb64f9cf6");function i(e){const t=n.decompile(e);return 1===t.length&&n.isCanonicalScriptSignature(t[0])}t.check=i,i.toJSON=(()=>"pubKey input")},"79f3a97e0c3a3c140749":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("c52e0ee7ccfeb64f9cf6"),i=r("c52e0ee7ccfeb64f9cf6");function s(e){const t=n.compile(e);return 25===t.length&&t[0]===i.OPS.OP_DUP&&t[1]===i.OPS.OP_HASH160&&20===t[2]&&t[23]===i.OPS.OP_EQUALVERIFY&&t[24]===i.OPS.OP_CHECKSIG}t.check=s,s.toJSON=(()=>"pubKeyHash output")},"8181d1a037f7ee7c0bf5":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("9bd267f2f681d34bd26d");t.embed=n.p2data;const i=r("9a99dd93893d01caf175");t.p2ms=i.p2ms;const s=r("bf66a79114c6132e39fa");t.p2pk=s.p2pk;const o=r("d37f60d760ff0771ffa9");t.p2pkh=o.p2pkh;const u=r("3ea3f4f10c55dd85e691");t.p2sh=u.p2sh;const c=r("a4fb6f91f8da62fe4bb2");t.p2wpkh=c.p2wpkh;const a=r("a85b725d3464918a415c");t.p2wsh=a.p2wsh},"86f874783a6e655659bf":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const n=r("4894e9093f1fdbf5d4c4"),i=r("5e1481e42138e937e546"),s=r("ea044cef055159387d69"),o=r("247180d06ad5f0d3ae5f"),u=r("beaf39890650aa5299f8"),c=r("2d6e5edc7083b0a69b78"),a=r("64ac9276262faec88968"),p=r("928311dc04c6002b08e8"),h=r("8181d1a037f7ee7c0bf5"),f=r("c52e0ee7ccfeb64f9cf6"),d=r("f49d9113a79536d617f0"),l={network:p.bitcoin,maximumFeeRate:5e3};class w{constructor(e={},t=new n.Psbt(new m)){this.data=t,this.opts=Object.assign({},l,e),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx},0===this.data.inputs.length&&this.setVersion(2);const r=(e,t,r,n)=>Object.defineProperty(e,t,{enumerable:r,writable:n});r(this,"__CACHE",!1,!0),r(this,"opts",!1,!0)}static fromBase64(t,r={}){const n=e.from(t,"base64");return this.fromBuffer(n,r)}static fromHex(t,r={}){const n=e.from(t,"hex");return this.fromBuffer(n,r)}static fromBuffer(e,t={}){const r=n.Psbt.fromBuffer(e,b),i=new w(t,r);var s,o;return s=i.__CACHE.__TX,o=i.__CACHE,s.ins.forEach(e=>{I(o,e)}),i}get inputCount(){return this.data.inputs.length}combine(...e){return this.data.combine(...e.map(e=>e.data)),this}clone(){const e=w.fromBuffer(this.data.toBuffer());return e.opts=JSON.parse(JSON.stringify(this.opts)),e}setMaximumFeeRate(e){O(e),this.opts.maximumFeeRate=e}setVersion(e){O(e),P(this.data.inputs,"setVersion");const t=this.__CACHE;return t.__TX.version=e,t.__EXTRACTED_TX=void 0,this}setLocktime(e){O(e),P(this.data.inputs,"setLocktime");const t=this.__CACHE;return t.__TX.locktime=e,t.__EXTRACTED_TX=void 0,this}setInputSequence(e,t){O(t),P(this.data.inputs,"setInputSequence");const r=this.__CACHE;if(r.__TX.ins.length<=e)throw new Error("Input index too high");return r.__TX.ins[e].sequence=t,r.__EXTRACTED_TX=void 0,this}addInputs(e){return e.forEach(e=>this.addInput(e)),this}addInput(e){P(this.data.inputs,"addInput");const t=this.__CACHE;this.data.addInput(e),I(t,t.__TX.ins[t.__TX.ins.length-1]);const r=this.data.inputs.length-1,n=this.data.inputs[r];return n.nonWitnessUtxo&&K(this.__CACHE,n,r),t.__FEE=void 0,t.__FEE_RATE=void 0,t.__EXTRACTED_TX=void 0,this}addOutputs(e){return e.forEach(e=>this.addOutput(e)),this}addOutput(e){P(this.data.inputs,"addOutput");const{address:t}=e;if("string"===typeof t){const{network:r}=this.opts,n=o.toOutputScript(t,r);e=Object.assign(e,{script:n})}const r=this.__CACHE;return this.data.addOutput(e),r.__FEE=void 0,r.__FEE_RATE=void 0,r.__EXTRACTED_TX=void 0,this}extractTransaction(e){if(!this.data.inputs.every(g))throw new Error("Not finalized");const t=this.__CACHE;if(e||function(e,t,r){const n=t.__FEE_RATE||e.getFeeRate(),i=t.__EXTRACTED_TX.virtualSize(),s=n*i;if(n>=r.maximumFeeRate)throw new Error(`Warning: You are paying around ${(s/1e8).toFixed(8)} in `+`fees, which is ${n} satoshi per byte for a transaction `+`with a VSize of ${i} bytes (segwit counted as 0.25 byte per `+"byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.")}(this,t,this.opts),t.__EXTRACTED_TX)return t.__EXTRACTED_TX;const r=t.__TX.clone();return M(this.data.inputs,r,t,!0),r}getFeeRate(){return U("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return U("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return s.checkForInput(this.data.inputs,0),j(this.data.inputs.length).forEach(e=>this.finalizeInput(e)),this}finalizeInput(e){const t=s.checkForInput(this.data.inputs,e),{script:r,isP2SH:n,isP2WSH:i,isSegwit:o}=function(e,t,r){const n=r.__TX,i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(i.isP2SH=!!t.redeemScript,i.isP2WSH=!!t.witnessScript,t.witnessScript)i.script=t.witnessScript;else if(t.redeemScript)i.script=t.redeemScript;else if(t.nonWitnessUtxo){const s=q(r,t,e),o=n.ins[e].index;i.script=s.outs[o].script}else t.witnessUtxo&&(i.script=t.witnessUtxo.script);(t.witnessScript||T(i.script))&&(i.isSegwit=!0);return i}(e,t,this.__CACHE);if(!r)throw new Error(`No script found for input #${e}`);const u=function(e){return T(e)?"witnesspubkeyhash":E(e)?"pubkeyhash":_(e)?"multisig":v(e)?"pubkey":"nonstandard"}(r);if(!function(e,t,r){switch(r){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return y(1,e.partialSig);case"multisig":const n=h.p2ms({output:t});return y(n.m,e.partialSig);default:return!1}}(t,r,u))throw new Error(`Can not finalize input #${e}`);!function(e){if(!e.sighashType||!e.partialSig)return;const{partialSig:t,sighashType:r}=e;t.forEach(e=>{const{hashType:t}=f.signature.decode(e.signature);if(r!==t)throw new Error("Signature sighash does not match input sighash type")})}(t);const{finalScriptSig:c,finalScriptWitness:a}=function(e,t,r,n,i,s){let o,u;const c=function(e,t,r){let n;switch(t){case"multisig":const i=function(e,t){return h.p2ms({output:e}).pubkeys.map(e=>(t.filter(t=>t.pubkey.equals(e))[0]||{}).signature).filter(e=>!!e)}(e,r);n=h.p2ms({output:e,signatures:i});break;case"pubkey":n=h.p2pk({output:e,signature:r[0].signature});break;case"pubkeyhash":n=h.p2pkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature});break;case"witnesspubkeyhash":n=h.p2wpkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature})}return n}(e,t,r),a=s?h.p2wsh({redeem:c}):null,p=i?h.p2sh({redeem:a||c}):null;n?(u=R(a?a.witness:c.witness),p&&(o=p.input)):o=p?p.input:c.input;return{finalScriptSig:o,finalScriptWitness:u}}(r,u,t.partialSig,o,n,i);if(c&&this.data.updateInput(e,{finalScriptSig:c}),a&&this.data.updateInput(e,{finalScriptWitness:a}),!c&&!a)throw new Error(`Unknown error finalizing input #${e}`);return this.data.clearFinalizedInput(e),this}validateSignaturesOfAllInputs(){return s.checkForInput(this.data.inputs,0),j(this.data.inputs.length).map(e=>this.validateSignaturesOfInput(e)).reduce((e,t)=>!0===t&&e,!0)}validateSignaturesOfInput(e,t){const r=this.data.inputs[e],n=(r||{}).partialSig;if(!r||!n||n.length<1)throw new Error("No signatures to validate");const i=t?n.filter(e=>e.pubkey.equals(t)):n;if(i.length<1)throw new Error("No signatures for this pubkey");const s=[];let o,u,c;for(const t of i){const n=f.signature.decode(t.signature),{hash:i,script:p}=c!==n.hashType?x(e,Object.assign({},r,{sighashType:n.hashType}),this.__CACHE):{hash:o,script:u};c=n.hashType,o=i,u=p,H(t.pubkey,p,"verify");const h=a.fromPublicKey(t.pubkey);s.push(h.verify(i,n.signature))}return s.every(e=>!0===e)}signAllInputsHD(e,t=[d.Transaction.SIGHASH_ALL]){if(!e||!e.publicKey||!e.fingerprint)throw new Error("Need HDSigner to sign input");const r=[];for(const n of j(this.data.inputs.length))try{this.signInputHD(n,e,t),r.push(!0)}catch(e){r.push(!1)}if(r.every(e=>!1===e))throw new Error("No inputs were signed");return this}signAllInputsHDAsync(e,t=[d.Transaction.SIGHASH_ALL]){return new Promise((r,n)=>{if(!e||!e.publicKey||!e.fingerprint)return n(new Error("Need HDSigner to sign input"));const i=[],s=[];for(const r of j(this.data.inputs.length))s.push(this.signInputHDAsync(r,e,t).then(()=>{i.push(!0)},()=>{i.push(!1)}));return Promise.all(s).then(()=>{if(i.every(e=>!1===e))return n(new Error("No inputs were signed"));r()})})}signInputHD(e,t,r=[d.Transaction.SIGHASH_ALL]){if(!t||!t.publicKey||!t.fingerprint)throw new Error("Need HDSigner to sign input");return W(e,this.data.inputs,t).forEach(t=>this.signInput(e,t,r)),this}signInputHDAsync(e,t,r=[d.Transaction.SIGHASH_ALL]){return new Promise((n,i)=>{if(!t||!t.publicKey||!t.fingerprint)return i(new Error("Need HDSigner to sign input"));const s=W(e,this.data.inputs,t).map(t=>this.signInputAsync(e,t,r));return Promise.all(s).then(()=>{n()}).catch(i)})}signAllInputs(e,t=[d.Transaction.SIGHASH_ALL]){if(!e||!e.publicKey)throw new Error("Need Signer to sign input");const r=[];for(const n of j(this.data.inputs.length))try{this.signInput(n,e,t),r.push(!0)}catch(e){r.push(!1)}if(r.every(e=>!1===e))throw new Error("No inputs were signed");return this}signAllInputsAsync(e,t=[d.Transaction.SIGHASH_ALL]){return new Promise((r,n)=>{if(!e||!e.publicKey)return n(new Error("Need Signer to sign input"));const i=[],s=[];for(const[r]of this.data.inputs.entries())s.push(this.signInputAsync(r,e,t).then(()=>{i.push(!0)},()=>{i.push(!1)}));return Promise.all(s).then(()=>{if(i.every(e=>!1===e))return n(new Error("No inputs were signed"));r()})})}signInput(e,t,r=[d.Transaction.SIGHASH_ALL]){if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const{hash:n,sighashType:i}=B(this.data.inputs,e,t.publicKey,this.__CACHE,r),s=[{pubkey:t.publicKey,signature:f.signature.encode(t.sign(n),i)}];return this.data.updateInput(e,{partialSig:s}),this}signInputAsync(e,t,r=[d.Transaction.SIGHASH_ALL]){return new Promise((n,i)=>{if(!t||!t.publicKey)return i(new Error("Need Signer to sign input"));const{hash:s,sighashType:o}=B(this.data.inputs,e,t.publicKey,this.__CACHE,r);Promise.resolve(t.sign(s)).then(r=>{const i=[{pubkey:t.publicKey,signature:f.signature.encode(r,o)}];this.data.updateInput(e,{partialSig:i}),n()})})}toBuffer(){return this.data.toBuffer()}toHex(){return this.data.toHex()}toBase64(){return this.data.toBase64()}updateGlobal(e){return this.data.updateGlobal(e),this}updateInput(e,t){return this.data.updateInput(e,t),t.nonWitnessUtxo&&K(this.__CACHE,this.data.inputs[e],e),this}updateOutput(e,t){return this.data.updateOutput(e,t),this}addUnknownKeyValToGlobal(e){return this.data.addUnknownKeyValToGlobal(e),this}addUnknownKeyValToInput(e,t){return this.data.addUnknownKeyValToInput(e,t),this}addUnknownKeyValToOutput(e,t){return this.data.addUnknownKeyValToOutput(e,t),this}clearFinalizedInput(e){return this.data.clearFinalizedInput(e),this}}t.Psbt=w;const b=e=>new m(e);class m{constructor(t=e.from([2,0,0,0,0,0,0,0,0,0])){this.tx=d.Transaction.fromBuffer(t),function(e){if(!e.ins.every(e=>e.script&&0===e.script.length&&e.witness&&0===e.witness.length))throw new Error("Format Error: Transaction ScriptSigs are not empty")}(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(t){if(void 0===t.hash||void 0===t.index||!e.isBuffer(t.hash)&&"string"!==typeof t.hash||"number"!==typeof t.index)throw new Error("Error adding input.");const r="string"===typeof t.hash?u.reverseBuffer(e.from(t.hash,"hex")):t.hash;this.tx.addInput(r,t.index,t.sequence)}addOutput(t){if(void 0===t.script||void 0===t.value||!e.isBuffer(t.script)||"number"!==typeof t.value)throw new Error("Error adding output.");this.tx.addOutput(t.script,t.value)}toBuffer(){return this.tx.toBuffer()}}function y(e,t){if(!t)return!1;if(t.length>e)throw new Error("Too many signatures");return t.length===e}function g(e){return!!e.finalScriptSig||!!e.finalScriptWitness}function S(e){return t=>{try{return e({output:t}),!0}catch(e){return!1}}}const _=S(h.p2ms),v=S(h.p2pk),E=S(h.p2pkh),T=S(h.p2wpkh),k=S(h.p2wsh);function O(e){if("number"!==typeof e||e!==Math.floor(e)||e>4294967295||e<0)throw new Error("Invalid 32 bit integer")}function P(t,r){t.forEach(t=>{let n=!1,i=[];if(0===(t.partialSig||[]).length){if(!t.finalScriptSig&&!t.finalScriptWitness)return;i=function(t){const r=t.finalScriptSig&&f.decompile(t.finalScriptSig)||[],n=t.finalScriptWitness&&f.decompile(t.finalScriptWitness)||[];return r.concat(n).filter(t=>e.isBuffer(t)&&f.isCanonicalScriptSignature(t)).map(e=>({signature:e}))}(t)}else i=t.partialSig;if(i.forEach(e=>{const{hashType:t}=f.signature.decode(e.signature),i=[];switch(t&d.Transaction.SIGHASH_ANYONECANPAY&&i.push("addInput"),31&t){case d.Transaction.SIGHASH_ALL:break;case d.Transaction.SIGHASH_SINGLE:case d.Transaction.SIGHASH_NONE:i.push("addOutput"),i.push("setInputSequence")}-1===i.indexOf(r)&&(n=!0)}),n)throw new Error("Can not modify transaction, signatures exist.")})}function H(e,t,r){const n=c.hash160(e),i=f.decompile(t);if(null===i)throw new Error("Unknown script error");if(!i.some(t=>"number"!==typeof t&&(t.equals(e)||t.equals(n))))throw new Error(`Can not ${r} for this input with the key ${e.toString("hex")}`)}function I(t,r){const n=u.reverseBuffer(e.from(r.hash)).toString("hex")+":"+r.index;if(t.__TX_IN_CACHE[n])throw new Error("Duplicate input detected.");t.__TX_IN_CACHE[n]=1}function N(e,t){return(r,n,i)=>{const s=e({redeem:{output:i}}).output;if(!n.equals(s))throw new Error(`${t} for input #${r} doesn't match the scriptPubKey in the prevout`)}}const A=N(h.p2sh,"Redeem script"),C=N(h.p2wsh,"Witness script");function U(e,t,r,n){if(!r.every(g))throw new Error(`PSBT must be finalized to calculate ${t}`);if("__FEE_RATE"===e&&n.__FEE_RATE)return n.__FEE_RATE;if("__FEE"===e&&n.__FEE)return n.__FEE;let i,s=!0;return n.__EXTRACTED_TX?(i=n.__EXTRACTED_TX,s=!1):i=n.__TX.clone(),M(r,i,n,s),"__FEE_RATE"===e?n.__FEE_RATE:"__FEE"===e?n.__FEE:void 0}function B(e,t,r,n,i){const o=s.checkForInput(e,t),{hash:u,sighashType:c,script:a}=x(t,o,n,i);return H(r,a,"sign"),{hash:u,sighashType:c}}function x(e,t,r,n){const i=r.__TX,s=t.sighashType||d.Transaction.SIGHASH_ALL;if(n&&n.indexOf(s)<0){const e=function(e){let t=e&d.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(31&e){case d.Transaction.SIGHASH_ALL:t+="SIGHASH_ALL";break;case d.Transaction.SIGHASH_SINGLE:t+="SIGHASH_SINGLE";break;case d.Transaction.SIGHASH_NONE:t+="SIGHASH_NONE"}return t}(s);throw new Error("Sighash type is not allowed. Retry the sign method passing the "+`sighashTypes array of whitelisted types. Sighash type: ${e}`)}let o,u;if(t.nonWitnessUtxo){const n=q(r,t,e),c=i.ins[e].hash,a=n.getHash();if(!c.equals(a))throw new Error(`Non-witness UTXO hash for input #${e} doesn't match the hash specified in the prevout`);const p=i.ins[e].index,f=n.outs[p];if(t.redeemScript?(A(e,f.script,t.redeemScript),u=t.redeemScript):u=f.script,k(u)){if(!t.witnessScript)throw new Error("Segwit input needs witnessScript if not P2WPKH");C(e,u,t.witnessScript),o=i.hashForWitnessV0(e,t.witnessScript,f.value,s),u=t.witnessScript}else if(T(u)){const t=h.p2pkh({hash:u.slice(2)}).output;o=i.hashForWitnessV0(e,t,f.value,s)}else o=i.hashForSignature(e,u,s)}else{if(!t.witnessUtxo)throw new Error("Need a Utxo input item for signing");{let r;if(t.redeemScript?(A(e,t.witnessUtxo.script,t.redeemScript),r=t.redeemScript):r=t.witnessUtxo.script,T(r)){const n=h.p2pkh({hash:r.slice(2)}).output;o=i.hashForWitnessV0(e,n,t.witnessUtxo.value,s),u=r}else{if(!k(r))throw new Error(`Input #${e} has witnessUtxo but non-segwit script: `+`${r.toString("hex")}`);if(!t.witnessScript)throw new Error("Segwit input needs witnessScript if not P2WPKH");C(e,r,t.witnessScript),o=i.hashForWitnessV0(e,t.witnessScript,t.witnessUtxo.value,s),u=t.witnessScript}}}return{script:u,sighashType:s,hash:o}}function W(e,t,r){const n=s.checkForInput(t,e);if(!n.bip32Derivation||0===n.bip32Derivation.length)throw new Error("Need bip32Derivation to sign with HD");const i=n.bip32Derivation.map(e=>e.masterFingerprint.equals(r.fingerprint)?e:void 0).filter(e=>!!e);if(0===i.length)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return i.map(e=>{const t=r.derivePath(e.path);if(!e.pubkey.equals(t.publicKey))throw new Error("pubkey did not match bip32Derivation");return t})}function L(e){let t=0;function r(){const r=i.decode(e,t);return t+=i.decode.bytes,r}function n(){return n=r(),t+=n,e.slice(t-n,t);var n}return function(){const e=r(),t=[];for(let r=0;r<e;r++)t.push(n());return t}()}function R(t){let r=e.allocUnsafe(0);function n(t){const n=r.length,s=i.encodingLength(t);r=e.concat([r,e.allocUnsafe(s)]),i.encode(t,r,n)}function s(t){n(t.length),function(t){r=e.concat([r,e.from(t)])}(t)}var o;return n((o=t).length),o.forEach(s),r}function K(e,t,r){e.__NON_WITNESS_UTXO_BUF_CACHE[r]=t.nonWitnessUtxo;const n=d.Transaction.fromBuffer(t.nonWitnessUtxo);e.__NON_WITNESS_UTXO_TX_CACHE[r]=n;const i=e,s=r;delete t.nonWitnessUtxo,Object.defineProperty(t,"nonWitnessUtxo",{enumerable:!0,get(){const e=i.__NON_WITNESS_UTXO_BUF_CACHE[s],t=i.__NON_WITNESS_UTXO_TX_CACHE[s];if(void 0!==e)return e;{const e=t.toBuffer();return i.__NON_WITNESS_UTXO_BUF_CACHE[s]=e,e}},set(e){i.__NON_WITNESS_UTXO_BUF_CACHE[s]=e}})}function M(e,t,r,n){let i=0;e.forEach((e,s)=>{if(n&&e.finalScriptSig&&(t.ins[s].script=e.finalScriptSig),n&&e.finalScriptWitness&&(t.ins[s].witness=L(e.finalScriptWitness)),e.witnessUtxo)i+=e.witnessUtxo.value;else if(e.nonWitnessUtxo){const n=q(r,e,s),o=t.ins[s].index,u=n.outs[o];i+=u.value}});const s=t.outs.reduce((e,t)=>e+t.value,0),o=i-s;if(o<0)throw new Error("Outputs are spending more than Inputs");const u=t.virtualSize();r.__FEE=o,r.__EXTRACTED_TX=t,r.__FEE_RATE=Math.floor(o/u)}function q(e,t,r){const n=e.__NON_WITNESS_UTXO_TX_CACHE;return n[r]||K(e,t,r),n[r]}function j(e){return[...Array(e).keys()]}}).call(this,r("3be624f7e9dc58942c52").Buffer)},"8a06de8a113371251a5d":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("765e5c44b6dae386e266");t.input=n;const i=r("a2857f37ec520a46c7f1");t.output=i},"8b0c8f6bc1e2b4530d3c":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("c52e0ee7ccfeb64f9cf6"),i=r("c52e0ee7ccfeb64f9cf6");function s(e){const t=n.compile(e);return 22===t.length&&t[0]===i.OPS.OP_0&&20===t[1]}t.check=s,s.toJSON=(()=>"Witness pubKeyHash output")},"928311dc04c6002b08e8":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bitcoin={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},t.regtest={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},t.testnet={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}},"989ba8f7d369b0d9568d":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("eb70bc5b37c6933481f8");t.input=n;const i=r("a94a7fc6003783a4e6e1");t.output=i},"9a99dd93893d01caf175":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("928311dc04c6002b08e8"),i=r("c52e0ee7ccfeb64f9cf6"),s=r("a125ad20952ba4c10fe4"),o=i.OPS,u=r("4982e4a9d5d9cc0006c5"),c=r("8b82fb7b88c11c89712a"),a=o.OP_RESERVED;function p(e,t){return e.length===t.length&&e.every((e,r)=>e.equals(t[r]))}t.p2ms=function(e,t){if(!e.input&&!e.output&&(!e.pubkeys||void 0===e.m)&&!e.signatures)throw new TypeError("Not enough data");function r(e){return i.isCanonicalScriptSignature(e)||void 0!==(t.allowIncomplete&&e===o.OP_0)}t=Object.assign({validate:!0},t||{}),u({network:u.maybe(u.Object),m:u.maybe(u.Number),n:u.maybe(u.Number),output:u.maybe(u.Buffer),pubkeys:u.maybe(u.arrayOf(c.isPoint)),signatures:u.maybe(u.arrayOf(r)),input:u.maybe(u.Buffer)},e);const h={network:e.network||n.bitcoin};let f=[],d=!1;function l(e){d||(d=!0,f=i.decompile(e),h.m=f[0]-a,h.n=f[f.length-2]-a,h.pubkeys=f.slice(1,-2))}if(s.prop(h,"output",()=>{if(e.m&&h.n&&e.pubkeys)return i.compile([].concat(a+e.m,e.pubkeys,a+h.n,o.OP_CHECKMULTISIG))}),s.prop(h,"m",()=>{if(h.output)return l(h.output),h.m}),s.prop(h,"n",()=>{if(h.pubkeys)return h.pubkeys.length}),s.prop(h,"pubkeys",()=>{if(e.output)return l(e.output),h.pubkeys}),s.prop(h,"signatures",()=>{if(e.input)return i.decompile(e.input).slice(1)}),s.prop(h,"input",()=>{if(e.signatures)return i.compile([o.OP_0].concat(e.signatures))}),s.prop(h,"witness",()=>{if(h.input)return[]}),s.prop(h,"name",()=>{if(h.m&&h.n)return`p2ms(${h.m} of ${h.n})`}),t.validate){if(e.output){if(l(e.output),!u.Number(f[0]))throw new TypeError("Output is invalid");if(!u.Number(f[f.length-2]))throw new TypeError("Output is invalid");if(f[f.length-1]!==o.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(h.m<=0||h.n>16||h.m>h.n||h.n!==f.length-3)throw new TypeError("Output is invalid");if(!h.pubkeys.every(e=>c.isPoint(e)))throw new TypeError("Output is invalid");if(void 0!==e.m&&e.m!==h.m)throw new TypeError("m mismatch");if(void 0!==e.n&&e.n!==h.n)throw new TypeError("n mismatch");if(e.pubkeys&&!p(e.pubkeys,h.pubkeys))throw new TypeError("Pubkeys mismatch")}if(e.pubkeys){if(void 0!==e.n&&e.n!==e.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(h.n=e.pubkeys.length,h.n<h.m)throw new TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<h.m)throw new TypeError("Not enough signatures provided");if(e.signatures.length>h.m)throw new TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==o.OP_0)throw new TypeError("Input is invalid");if(0===h.signatures.length||!h.signatures.every(r))throw new TypeError("Input has invalid signature(s)");if(e.signatures&&!p(e.signatures,h.signatures))throw new TypeError("Signature mismatch");if(void 0!==e.m&&e.m!==e.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(h,e)}},"9bd267f2f681d34bd26d":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("928311dc04c6002b08e8"),i=r("c52e0ee7ccfeb64f9cf6"),s=r("a125ad20952ba4c10fe4"),o=r("4982e4a9d5d9cc0006c5"),u=i.OPS;t.p2data=function(e,t){if(!e.data&&!e.output)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),o({network:o.maybe(o.Object),output:o.maybe(o.Buffer),data:o.maybe(o.arrayOf(o.Buffer))},e);const r={name:"embed",network:e.network||n.bitcoin};if(s.prop(r,"output",()=>{if(e.data)return i.compile([u.OP_RETURN].concat(e.data))}),s.prop(r,"data",()=>{if(e.output)return i.decompile(e.output).slice(1)}),t.validate&&e.output){const t=i.decompile(e.output);if(t[0]!==u.OP_RETURN)throw new TypeError("Output is invalid");if(!t.slice(1).every(o.Buffer))throw new TypeError("Output is invalid");if(e.data&&!function(e,t){return e.length===t.length&&e.every((e,r)=>e.equals(t[r]))}(e.data,r.data))throw new TypeError("Data mismatch")}return Object.assign(r,e)}},a125ad20952ba4c10fe4:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prop=function(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){const e=r.call(this);return this[t]=e,e},set(e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})}})},t.value=function(e){let t;return()=>void 0!==t?t:t=e()}},a2857f37ec520a46c7f1:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("c52e0ee7ccfeb64f9cf6"),i=r("c52e0ee7ccfeb64f9cf6");function s(e){const t=n.decompile(e);return 2===t.length&&n.isCanonicalPubKey(t[0])&&t[1]===i.OPS.OP_CHECKSIG}t.check=s,s.toJSON=(()=>"pubKey output")},a4fb6f91f8da62fe4bb2:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const n=r("2d6e5edc7083b0a69b78"),i=r("928311dc04c6002b08e8"),s=r("c52e0ee7ccfeb64f9cf6"),o=r("a125ad20952ba4c10fe4"),u=r("4982e4a9d5d9cc0006c5"),c=s.OPS,a=r("8b82fb7b88c11c89712a"),p=r("eb43aa378b3d50eaa0db"),h=e.alloc(0);t.p2wpkh=function(t,r){if(!t.address&&!t.hash&&!t.output&&!t.pubkey&&!t.witness)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),u({address:u.maybe(u.String),hash:u.maybe(u.BufferN(20)),input:u.maybe(u.BufferN(0)),network:u.maybe(u.Object),output:u.maybe(u.BufferN(22)),pubkey:u.maybe(a.isPoint),signature:u.maybe(s.isCanonicalScriptSignature),witness:u.maybe(u.arrayOf(u.Buffer))},t);const f=o.value(()=>{const r=p.decode(t.address),n=r.words.shift(),i=p.fromWords(r.words);return{version:n,prefix:r.prefix,data:e.from(i)}}),d=t.network||i.bitcoin,l={name:"p2wpkh",network:d};if(o.prop(l,"address",()=>{if(!l.hash)return;const e=p.toWords(l.hash);return e.unshift(0),p.encode(d.bech32,e)}),o.prop(l,"hash",()=>t.output?t.output.slice(2,22):t.address?f().data:t.pubkey||l.pubkey?n.hash160(t.pubkey||l.pubkey):void 0),o.prop(l,"output",()=>{if(l.hash)return s.compile([c.OP_0,l.hash])}),o.prop(l,"pubkey",()=>t.pubkey?t.pubkey:t.witness?t.witness[1]:void 0),o.prop(l,"signature",()=>{if(t.witness)return t.witness[0]}),o.prop(l,"input",()=>{if(l.witness)return h}),o.prop(l,"witness",()=>{if(t.pubkey&&t.signature)return[t.signature,t.pubkey]}),r.validate){let r=e.from([]);if(t.address){if(d&&d.bech32!==f().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(0!==f().version)throw new TypeError("Invalid address version");if(20!==f().data.length)throw new TypeError("Invalid address data");r=f().data}if(t.hash){if(r.length>0&&!r.equals(t.hash))throw new TypeError("Hash mismatch");r=t.hash}if(t.output){if(22!==t.output.length||t.output[0]!==c.OP_0||20!==t.output[1])throw new TypeError("Output is invalid");if(r.length>0&&!r.equals(t.output.slice(2)))throw new TypeError("Hash mismatch");r=t.output.slice(2)}if(t.pubkey){const e=n.hash160(t.pubkey);if(r.length>0&&!r.equals(e))throw new TypeError("Hash mismatch");r=e}if(t.witness){if(2!==t.witness.length)throw new TypeError("Witness is invalid");if(!s.isCanonicalScriptSignature(t.witness[0]))throw new TypeError("Witness has invalid signature");if(!a.isPoint(t.witness[1]))throw new TypeError("Witness has invalid pubkey");if(t.signature&&!t.signature.equals(t.witness[0]))throw new TypeError("Signature mismatch");if(t.pubkey&&!t.pubkey.equals(t.witness[1]))throw new TypeError("Pubkey mismatch");const e=n.hash160(t.witness[1]);if(r.length>0&&!r.equals(e))throw new TypeError("Hash mismatch")}}return Object.assign(l,t)}}).call(this,r("3be624f7e9dc58942c52").Buffer)},a7f571aaad544c0a1b11:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("5d9e5db4b273f00a777d");t.output=n},a85b725d3464918a415c:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const n=r("2d6e5edc7083b0a69b78"),i=r("928311dc04c6002b08e8"),s=r("c52e0ee7ccfeb64f9cf6"),o=r("a125ad20952ba4c10fe4"),u=r("4982e4a9d5d9cc0006c5"),c=s.OPS,a=r("eb43aa378b3d50eaa0db"),p=e.alloc(0);t.p2wsh=function(t,r){if(!t.address&&!t.hash&&!t.output&&!t.redeem&&!t.witness)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),u({network:u.maybe(u.Object),address:u.maybe(u.String),hash:u.maybe(u.BufferN(32)),output:u.maybe(u.BufferN(34)),redeem:u.maybe({input:u.maybe(u.Buffer),network:u.maybe(u.Object),output:u.maybe(u.Buffer),witness:u.maybe(u.arrayOf(u.Buffer))}),input:u.maybe(u.BufferN(0)),witness:u.maybe(u.arrayOf(u.Buffer))},t);const h=o.value(()=>{const r=a.decode(t.address),n=r.words.shift(),i=a.fromWords(r.words);return{version:n,prefix:r.prefix,data:e.from(i)}}),f=o.value(()=>s.decompile(t.redeem.input));let d=t.network;d||(d=t.redeem&&t.redeem.network||i.bitcoin);const l={network:d};if(o.prop(l,"address",()=>{if(!l.hash)return;const e=a.toWords(l.hash);return e.unshift(0),a.encode(d.bech32,e)}),o.prop(l,"hash",()=>t.output?t.output.slice(2):t.address?h().data:l.redeem&&l.redeem.output?n.sha256(l.redeem.output):void 0),o.prop(l,"output",()=>{if(l.hash)return s.compile([c.OP_0,l.hash])}),o.prop(l,"redeem",()=>{if(t.witness)return{output:t.witness[t.witness.length-1],input:p,witness:t.witness.slice(0,-1)}}),o.prop(l,"input",()=>{if(l.witness)return p}),o.prop(l,"witness",()=>{if(t.redeem&&t.redeem.input&&t.redeem.input.length>0&&t.redeem.output&&t.redeem.output.length>0){const e=s.toStack(f());return l.redeem=Object.assign({witness:e},t.redeem),l.redeem.input=p,[].concat(e,t.redeem.output)}if(t.redeem&&t.redeem.output&&t.redeem.witness)return[].concat(t.redeem.witness,t.redeem.output)}),o.prop(l,"name",()=>{const e=["p2wsh"];return void 0!==l.redeem&&e.push(l.redeem.name),e.join("-")}),r.validate){let r=e.from([]);if(t.address){if(h().prefix!==d.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(0!==h().version)throw new TypeError("Invalid address version");if(32!==h().data.length)throw new TypeError("Invalid address data");r=h().data}if(t.hash){if(r.length>0&&!r.equals(t.hash))throw new TypeError("Hash mismatch");r=t.hash}if(t.output){if(34!==t.output.length||t.output[0]!==c.OP_0||32!==t.output[1])throw new TypeError("Output is invalid");const e=t.output.slice(2);if(r.length>0&&!r.equals(e))throw new TypeError("Hash mismatch");r=e}if(t.redeem){if(t.redeem.network&&t.redeem.network!==d)throw new TypeError("Network mismatch");if(t.redeem.input&&t.redeem.input.length>0&&t.redeem.witness&&t.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(t.redeem.output){if(0===s.decompile(t.redeem.output).length)throw new TypeError("Redeem.output is invalid");const e=n.sha256(t.redeem.output);if(r.length>0&&!r.equals(e))throw new TypeError("Hash mismatch");r=e}if(t.redeem.input&&!s.isPushOnly(f()))throw new TypeError("Non push-only scriptSig");if(t.witness&&t.redeem.witness&&!function(e,t){return e.length===t.length&&e.every((e,r)=>e.equals(t[r]))}(t.witness,t.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch")}if(t.witness&&t.redeem&&t.redeem.output&&!t.redeem.output.equals(t.witness[t.witness.length-1]))throw new TypeError("Witness and redeem.output mismatch")}return Object.assign(l,t)}}).call(this,r("3be624f7e9dc58942c52").Buffer)},a94a7fc6003783a4e6e1:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("c52e0ee7ccfeb64f9cf6"),i=r("c52e0ee7ccfeb64f9cf6"),s=r("3b58bc5d4fd32db48dd3"),o=i.OPS.OP_RESERVED;function u(e,t){const r=n.decompile(e);if(r.length<4)return!1;if(r[r.length-1]!==i.OPS.OP_CHECKMULTISIG)return!1;if(!s.Number(r[0]))return!1;if(!s.Number(r[r.length-2]))return!1;const u=r[0]-o,c=r[r.length-2]-o;return!(u<=0)&&(!(c>16)&&(!(u>c)&&(c===r.length-3&&(!!t||r.slice(1,-2).every(n.isCanonicalPubKey)))))}t.check=u,u.toJSON=(()=>"multi-sig output")},b6ddff02878d58adaad7:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("6f7d973c27d1f8f71596");t.bip32=n;const i=r("247180d06ad5f0d3ae5f");t.address=i;const s=r("2d6e5edc7083b0a69b78");t.crypto=s;const o=r("64ac9276262faec88968");t.ECPair=o;const u=r("928311dc04c6002b08e8");t.networks=u;const c=r("8181d1a037f7ee7c0bf5");t.payments=c;const a=r("c52e0ee7ccfeb64f9cf6");t.script=a;var p=r("5c1198e48f2c6e65e14b");t.Block=p.Block;var h=r("86f874783a6e655659bf");t.Psbt=h.Psbt;var f=r("c52e0ee7ccfeb64f9cf6");t.opcodes=f.OPS;var d=r("f49d9113a79536d617f0");t.Transaction=d.Transaction;var l=r("db1f098a8f9cf34f7a37");t.TransactionBuilder=l.TransactionBuilder},be8a53eb8cb69afa8539:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("53a0834872f8472c4ada");t.input=n;const i=r("ee959e333f530563024f");t.output=i},beaf39890650aa5299f8:function(e,t,r){"use strict";function n(e,t){if("number"!==typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}Object.defineProperty(t,"__esModule",{value:!0}),t.readUInt64LE=function(e,t){const r=e.readUInt32LE(t);let i=e.readUInt32LE(t+4);return n((i*=4294967296)+r,9007199254740991),i+r},t.writeUInt64LE=function(e,t,r){return n(t,9007199254740991),e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8},t.reverseBuffer=function(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e}},bf66a79114c6132e39fa:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("928311dc04c6002b08e8"),i=r("c52e0ee7ccfeb64f9cf6"),s=r("a125ad20952ba4c10fe4"),o=r("4982e4a9d5d9cc0006c5"),u=i.OPS,c=r("8b82fb7b88c11c89712a");t.p2pk=function(e,t){if(!e.input&&!e.output&&!e.pubkey&&!e.input&&!e.signature)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),o({network:o.maybe(o.Object),output:o.maybe(o.Buffer),pubkey:o.maybe(c.isPoint),signature:o.maybe(i.isCanonicalScriptSignature),input:o.maybe(o.Buffer)},e);const r=s.value(()=>i.decompile(e.input)),a={name:"p2pk",network:e.network||n.bitcoin};if(s.prop(a,"output",()=>{if(e.pubkey)return i.compile([e.pubkey,u.OP_CHECKSIG])}),s.prop(a,"pubkey",()=>{if(e.output)return e.output.slice(1,-1)}),s.prop(a,"signature",()=>{if(e.input)return r()[0]}),s.prop(a,"input",()=>{if(e.signature)return i.compile([e.signature])}),s.prop(a,"witness",()=>{if(a.input)return[]}),t.validate){if(e.output){if(e.output[e.output.length-1]!==u.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!c.isPoint(a.pubkey))throw new TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(a.pubkey))throw new TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(a.input))throw new TypeError("Signature mismatch");if(e.input){if(1!==r().length)throw new TypeError("Input is invalid");if(!i.isCanonicalScriptSignature(a.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(a,e)}},c52e0ee7ccfeb64f9cf6:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const n=r("08030d8a45f1cae3f1b1"),i=r("5da7ca624d4d72bb8522"),s=r("3b58bc5d4fd32db48dd3"),o=r("78631df91a52183a6424"),u=r("8b82fb7b88c11c89712a"),c=r("d436b4f39a04687e33e4"),a=r("4982e4a9d5d9cc0006c5");t.OPS=r("9b46ea97ce621f81d37e");const p=r("13c2c4baccacc40e4865"),h=t.OPS.OP_RESERVED;function f(e){return s.Buffer(e)||function(e){return s.Number(e)&&(e===t.OPS.OP_0||e>=t.OPS.OP_1&&e<=t.OPS.OP_16||e===t.OPS.OP_1NEGATE)}(e)}function d(e){return s.Array(e)&&e.every(f)}function l(e){return 0===e.length?t.OPS.OP_0:1===e.length?e[0]>=1&&e[0]<=16?h+e[0]:129===e[0]?t.OPS.OP_1NEGATE:void 0:void 0}function w(t){return e.isBuffer(t)}function b(t){return e.isBuffer(t)}function m(t){if(w(t))return t;a(s.Array,t);const r=t.reduce((e,t)=>b(t)?1===t.length&&void 0!==l(t)?e+1:e+c.encodingLength(t.length)+t.length:e+1,0),n=e.allocUnsafe(r);let i=0;if(t.forEach(e=>{if(b(e)){const t=l(e);if(void 0!==t)return n.writeUInt8(t,i),void(i+=1);i+=c.encode(n,e.length,i),e.copy(n,i),i+=e.length}else n.writeUInt8(e,i),i+=1}),i!==n.length)throw new Error("Could not decode chunks");return n}function y(e){if(r=e,s.Array(r))return e;var r;a(s.Buffer,e);const n=[];let i=0;for(;i<e.length;){const r=e[i];if(r>t.OPS.OP_0&&r<=t.OPS.OP_PUSHDATA4){const t=c.decode(e,i);if(null===t)return null;if((i+=t.size)+t.number>e.length)return null;const r=e.slice(i,i+t.number);i+=t.number;const s=l(r);void 0!==s?n.push(s):n.push(r)}else n.push(r),i+=1}return n}function g(e){const t=-129&e;return t>0&&t<4}t.isPushOnly=d,t.compile=m,t.decompile=y,t.toASM=function(e){return w(e)&&(e=y(e)),e.map(e=>{if(b(e)){const t=l(e);if(void 0===t)return e.toString("hex");e=t}return p[e]}).join(" ")},t.fromASM=function(r){return a(s.String,r),m(r.split(" ").map(r=>void 0!==t.OPS[r]?t.OPS[r]:(a(s.Hex,r),e.from(r,"hex"))))},t.toStack=function(r){return r=y(r),a(d,r),r.map(r=>b(r)?r:r===t.OPS.OP_0?e.allocUnsafe(0):n.encode(r-h))},t.isCanonicalPubKey=function(e){return u.isPoint(e)},t.isDefinedHashType=g,t.isCanonicalScriptSignature=function(t){return!!e.isBuffer(t)&&!!g(t[t.length-1])&&o.check(t.slice(0,-1))},t.number=n,t.signature=i}).call(this,r("3be624f7e9dc58942c52").Buffer)},d37f60d760ff0771ffa9:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const n=r("2d6e5edc7083b0a69b78"),i=r("928311dc04c6002b08e8"),s=r("c52e0ee7ccfeb64f9cf6"),o=r("a125ad20952ba4c10fe4"),u=r("4982e4a9d5d9cc0006c5"),c=s.OPS,a=r("8b82fb7b88c11c89712a"),p=r("53ead306b62e35ae6518");t.p2pkh=function(t,r){if(!t.address&&!t.hash&&!t.output&&!t.pubkey&&!t.input)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),u({network:u.maybe(u.Object),address:u.maybe(u.String),hash:u.maybe(u.BufferN(20)),output:u.maybe(u.BufferN(25)),pubkey:u.maybe(a.isPoint),signature:u.maybe(s.isCanonicalScriptSignature),input:u.maybe(u.Buffer)},t);const h=o.value(()=>{const e=p.decode(t.address);return{version:e.readUInt8(0),hash:e.slice(1)}}),f=o.value(()=>s.decompile(t.input)),d=t.network||i.bitcoin,l={name:"p2pkh",network:d};if(o.prop(l,"address",()=>{if(!l.hash)return;const t=e.allocUnsafe(21);return t.writeUInt8(d.pubKeyHash,0),l.hash.copy(t,1),p.encode(t)}),o.prop(l,"hash",()=>t.output?t.output.slice(3,23):t.address?h().hash:t.pubkey||l.pubkey?n.hash160(t.pubkey||l.pubkey):void 0),o.prop(l,"output",()=>{if(l.hash)return s.compile([c.OP_DUP,c.OP_HASH160,l.hash,c.OP_EQUALVERIFY,c.OP_CHECKSIG])}),o.prop(l,"pubkey",()=>{if(t.input)return f()[1]}),o.prop(l,"signature",()=>{if(t.input)return f()[0]}),o.prop(l,"input",()=>{if(t.pubkey&&t.signature)return s.compile([t.signature,t.pubkey])}),o.prop(l,"witness",()=>{if(l.input)return[]}),r.validate){let r=e.from([]);if(t.address){if(h().version!==d.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(20!==h().hash.length)throw new TypeError("Invalid address");r=h().hash}if(t.hash){if(r.length>0&&!r.equals(t.hash))throw new TypeError("Hash mismatch");r=t.hash}if(t.output){if(25!==t.output.length||t.output[0]!==c.OP_DUP||t.output[1]!==c.OP_HASH160||20!==t.output[2]||t.output[23]!==c.OP_EQUALVERIFY||t.output[24]!==c.OP_CHECKSIG)throw new TypeError("Output is invalid");const e=t.output.slice(3,23);if(r.length>0&&!r.equals(e))throw new TypeError("Hash mismatch");r=e}if(t.pubkey){const e=n.hash160(t.pubkey);if(r.length>0&&!r.equals(e))throw new TypeError("Hash mismatch");r=e}if(t.input){const e=f();if(2!==e.length)throw new TypeError("Input is invalid");if(!s.isCanonicalScriptSignature(e[0]))throw new TypeError("Input has invalid signature");if(!a.isPoint(e[1]))throw new TypeError("Input has invalid pubkey");if(t.signature&&!t.signature.equals(e[0]))throw new TypeError("Signature mismatch");if(t.pubkey&&!t.pubkey.equals(e[1]))throw new TypeError("Pubkey mismatch");const i=n.hash160(e[1]);if(r.length>0&&!r.equals(i))throw new TypeError("Hash mismatch")}}return Object.assign(l,t)}}).call(this,r("3be624f7e9dc58942c52").Buffer)},db1f098a8f9cf34f7a37:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const n=r("247180d06ad5f0d3ae5f"),i=r("beaf39890650aa5299f8"),s=r("20a0049eaa138cdc1fa2"),o=r("2d6e5edc7083b0a69b78"),u=r("64ac9276262faec88968"),c=r("928311dc04c6002b08e8"),a=r("8181d1a037f7ee7c0bf5"),p=r("c52e0ee7ccfeb64f9cf6"),h=r("c52e0ee7ccfeb64f9cf6"),f=r("f49d9113a79536d617f0"),d=r("3b58bc5d4fd32db48dd3"),l=r("4982e4a9d5d9cc0006c5"),w=s.types,b=new Set(["p2pkh","p2pk","p2wpkh","p2ms","p2sh-p2pkh","p2sh-p2pk","p2sh-p2wpkh","p2sh-p2ms","p2wsh-p2pkh","p2wsh-p2pk","p2wsh-p2ms","p2sh-p2wsh-p2pkh","p2sh-p2wsh-p2pk","p2sh-p2wsh-p2ms"]);function m(e,t,r){try{l(e,t)}catch(e){throw new Error(r)}}class y{constructor(e=c.bitcoin,t=2500){this.network=e,this.maximumFeeRate=t,this.__PREV_TX_SET={},this.__INPUTS=[],this.__TX=new f.Transaction,this.__TX.version=2,this.__USE_LOW_R=!1,console.warn("Deprecation Warning: TransactionBuilder will be removed in the future. (v6.x.x or later) Please use the Psbt class instead. Examples of usage are available in the transactions-psbt.js integration test file on our Github. A high level explanation is available in the psbt.ts and psbt.js files as well.")}static fromTransaction(e,t){const r=new y(t);return r.setVersion(e.version),r.setLockTime(e.locktime),e.outs.forEach(e=>{r.addOutput(e.script,e.value)}),e.ins.forEach(e=>{r.__addInputUnsafe(e.hash,e.index,{sequence:e.sequence,script:e.script,witness:e.witness})}),r.__INPUTS.forEach((t,r)=>{!function(e,t,r){if(e.redeemScriptType!==w.P2MS||!e.redeemScript)return;if(e.pubkeys.length===e.signatures.length)return;const n=e.signatures.concat();e.signatures=e.pubkeys.map(i=>{const s=u.fromPublicKey(i);let o;return n.some((i,u)=>{if(!i)return!1;const c=p.signature.decode(i),a=t.hashForSignature(r,e.redeemScript,c.hashType);return!!s.verify(a,c.signature)&&(n[u]=void 0,o=i,!0)}),o})}(t,e,r)}),r}setLowR(e){return l(l.maybe(l.Boolean),e),void 0===e&&(e=!0),this.__USE_LOW_R=e,e}setLockTime(e){if(l(d.UInt32,e),this.__INPUTS.some(e=>!!e.signatures&&e.signatures.some(e=>void 0!==e)))throw new Error("No, this would invalidate signatures");this.__TX.locktime=e}setVersion(e){l(d.UInt32,e),this.__TX.version=e}addInput(t,r,n,s){if(!this.__canModifyInputs())throw new Error("No, this would invalidate signatures");let o;if("string"===typeof(u=t)||u instanceof String)t=i.reverseBuffer(e.from(t,"hex"));else if(function(e){return e instanceof f.Transaction}(t)){const e=t.outs[r];s=e.script,o=e.value,t=t.getHash(!1)}var u;return this.__addInputUnsafe(t,r,{sequence:n,prevOutScript:s,value:o})}addOutput(e,t){if(!this.__canModifyOutputs())throw new Error("No, this would invalidate signatures");return"string"===typeof e&&(e=n.toOutputScript(e,this.network)),this.__TX.addOutput(e,t)}build(){return this.__build(!1)}buildIncomplete(){return this.__build(!0)}sign(e,t,r,n,i,s){!function({input:e,ourPubKey:t,keyPair:r,signatureHash:n,hashType:i,useLowR:s}){let o=!1;for(const[u,c]of e.pubkeys.entries()){if(!t.equals(c))continue;if(e.signatures[u])throw new Error("Signature already exists");if(33!==t.length&&e.hasWitness)throw new Error("BIP143 rejects uncompressed public keys in P2WPKH or P2WSH");const a=r.sign(n,s);e.signatures[u]=p.signature.encode(a,i),o=!0}if(!o)throw new Error("Key pair cannot sign for this input")}(function(e,t,r,n,i,s,o,u,c,h,y){let _;if("number"===typeof i)console.warn("DEPRECATED: TransactionBuilder sign method arguments will change in v6, please use the TxbSignArg interface"),_=i;else{if("object"!==typeof i)throw new TypeError("TransactionBuilder sign first arg must be TxbSignArg or number");!function(e,t){if(!b.has(t.prevOutScriptType))throw new TypeError(`Unknown prevOutScriptType "${t.prevOutScriptType}"`);m(l.Number,t.vin,"sign must include vin parameter as Number (input index)"),m(d.Signer,t.keyPair,"sign must include keyPair parameter as Signer interface"),m(l.maybe(l.Number),t.hashType,"sign hashType parameter must be a number");const r=(e[t.vin]||[]).prevOutType,n=t.prevOutScriptType;switch(n){case"p2pkh":if(r&&"pubkeyhash"!==r)throw new TypeError(`input #${t.vin} is not of type p2pkh: ${r}`);m(l.value(void 0),t.witnessScript,`${n} requires NO witnessScript`),m(l.value(void 0),t.redeemScript,`${n} requires NO redeemScript`),m(l.value(void 0),t.witnessValue,`${n} requires NO witnessValue`);break;case"p2pk":if(r&&"pubkey"!==r)throw new TypeError(`input #${t.vin} is not of type p2pk: ${r}`);m(l.value(void 0),t.witnessScript,`${n} requires NO witnessScript`),m(l.value(void 0),t.redeemScript,`${n} requires NO redeemScript`),m(l.value(void 0),t.witnessValue,`${n} requires NO witnessValue`);break;case"p2wpkh":if(r&&"witnesspubkeyhash"!==r)throw new TypeError(`input #${t.vin} is not of type p2wpkh: ${r}`);m(l.value(void 0),t.witnessScript,`${n} requires NO witnessScript`),m(l.value(void 0),t.redeemScript,`${n} requires NO redeemScript`),m(d.Satoshi,t.witnessValue,`${n} requires witnessValue`);break;case"p2ms":if(r&&"multisig"!==r)throw new TypeError(`input #${t.vin} is not of type p2ms: ${r}`);m(l.value(void 0),t.witnessScript,`${n} requires NO witnessScript`),m(l.value(void 0),t.redeemScript,`${n} requires NO redeemScript`),m(l.value(void 0),t.witnessValue,`${n} requires NO witnessValue`);break;case"p2sh-p2wpkh":if(r&&"scripthash"!==r)throw new TypeError(`input #${t.vin} is not of type p2sh-p2wpkh: ${r}`);m(l.value(void 0),t.witnessScript,`${n} requires NO witnessScript`),m(l.Buffer,t.redeemScript,`${n} requires redeemScript`),m(d.Satoshi,t.witnessValue,`${n} requires witnessValue`);break;case"p2sh-p2ms":case"p2sh-p2pk":case"p2sh-p2pkh":if(r&&"scripthash"!==r)throw new TypeError(`input #${t.vin} is not of type ${n}: ${r}`);m(l.value(void 0),t.witnessScript,`${n} requires NO witnessScript`),m(l.Buffer,t.redeemScript,`${n} requires redeemScript`),m(l.value(void 0),t.witnessValue,`${n} requires NO witnessValue`);break;case"p2wsh-p2ms":case"p2wsh-p2pk":case"p2wsh-p2pkh":if(r&&"witnessscripthash"!==r)throw new TypeError(`input #${t.vin} is not of type ${n}: ${r}`);m(l.Buffer,t.witnessScript,`${n} requires witnessScript`),m(l.value(void 0),t.redeemScript,`${n} requires NO redeemScript`),m(d.Satoshi,t.witnessValue,`${n} requires witnessValue`);break;case"p2sh-p2wsh-p2ms":case"p2sh-p2wsh-p2pk":case"p2sh-p2wsh-p2pkh":if(r&&"scripthash"!==r)throw new TypeError(`input #${t.vin} is not of type ${n}: ${r}`);m(l.Buffer,t.witnessScript,`${n} requires witnessScript`),m(l.Buffer,t.redeemScript,`${n} requires witnessScript`),m(d.Satoshi,t.witnessValue,`${n} requires witnessScript`)}}(t,i),({vin:_,keyPair:s,redeemScript:o,hashType:u,witnessValue:c,witnessScript:h}=i)}if(void 0===s)throw new Error("sign requires keypair");if(s.network&&s.network!==e)throw new TypeError("Inconsistent network");if(!t[_])throw new Error("No input at index: "+_);if(u=u||f.Transaction.SIGHASH_ALL,r(u))throw new Error("Transaction needs outputs");const v=t[_];if(void 0!==v.redeemScript&&o&&!v.redeemScript.equals(o))throw new Error("Inconsistent redeemScript");const E=s.publicKey||s.getPublicKey&&s.getPublicKey();if(!S(v)){if(void 0!==c){if(void 0!==v.value&&v.value!==c)throw new Error("Input did not match witnessValue");l(d.Satoshi,c),v.value=c}if(!S(v)){const e=function(e,t,r,n){if(r&&n){const i=a.p2wsh({redeem:{output:n}}),s=a.p2wsh({output:r}),o=a.p2sh({redeem:{output:r}}),u=a.p2sh({redeem:i});if(!i.hash.equals(s.hash))throw new Error("Witness script inconsistent with prevOutScript");if(!o.hash.equals(u.hash))throw new Error("Redeem script inconsistent with prevOutScript");const c=g(i.redeem.output,t);if(!c.pubkeys)throw new Error(c.type+" not supported as witnessScript ("+p.toASM(n)+")");e.signatures&&e.signatures.some(e=>void 0!==e)&&(c.signatures=e.signatures);const h=n;if(c.type===w.P2WPKH)throw new Error("P2SH(P2WSH(P2WPKH)) is a consensus failure");return{redeemScript:r,redeemScriptType:w.P2WSH,witnessScript:n,witnessScriptType:c.type,prevOutType:w.P2SH,prevOutScript:o.output,hasWitness:!0,signScript:h,signType:c.type,pubkeys:c.pubkeys,signatures:c.signatures,maxSignatures:c.maxSignatures}}if(r){const n=a.p2sh({redeem:{output:r}});if(e.prevOutScript){let t;try{t=a.p2sh({output:e.prevOutScript})}catch(e){throw new Error("PrevOutScript must be P2SH")}if(!n.hash.equals(t.hash))throw new Error("Redeem script inconsistent with prevOutScript")}const i=g(n.redeem.output,t);if(!i.pubkeys)throw new Error(i.type+" not supported as redeemScript ("+p.toASM(r)+")");e.signatures&&e.signatures.some(e=>void 0!==e)&&(i.signatures=e.signatures);let s=r;return i.type===w.P2WPKH&&(s=a.p2pkh({pubkey:i.pubkeys[0]}).output),{redeemScript:r,redeemScriptType:i.type,prevOutType:w.P2SH,prevOutScript:n.output,hasWitness:i.type===w.P2WPKH,signScript:s,signType:i.type,pubkeys:i.pubkeys,signatures:i.signatures,maxSignatures:i.maxSignatures}}if(n){const r=a.p2wsh({redeem:{output:n}});if(e.prevOutScript){const t=a.p2wsh({output:e.prevOutScript});if(!r.hash.equals(t.hash))throw new Error("Witness script inconsistent with prevOutScript")}const i=g(r.redeem.output,t);if(!i.pubkeys)throw new Error(i.type+" not supported as witnessScript ("+p.toASM(n)+")");e.signatures&&e.signatures.some(e=>void 0!==e)&&(i.signatures=e.signatures);const s=n;if(i.type===w.P2WPKH)throw new Error("P2WSH(P2WPKH) is a consensus failure");return{witnessScript:n,witnessScriptType:i.type,prevOutType:w.P2WSH,prevOutScript:r.output,hasWitness:!0,signScript:s,signType:i.type,pubkeys:i.pubkeys,signatures:i.signatures,maxSignatures:i.maxSignatures}}if(e.prevOutType&&e.prevOutScript){if(e.prevOutType===w.P2SH)throw new Error("PrevOutScript is "+e.prevOutType+", requires redeemScript");if(e.prevOutType===w.P2WSH)throw new Error("PrevOutScript is "+e.prevOutType+", requires witnessScript");if(!e.prevOutScript)throw new Error("PrevOutScript is missing");const r=g(e.prevOutScript,t);if(!r.pubkeys)throw new Error(r.type+" not supported ("+p.toASM(e.prevOutScript)+")");e.signatures&&e.signatures.some(e=>void 0!==e)&&(r.signatures=e.signatures);let n=e.prevOutScript;return r.type===w.P2WPKH&&(n=a.p2pkh({pubkey:r.pubkeys[0]}).output),{prevOutType:r.type,prevOutScript:e.prevOutScript,hasWitness:r.type===w.P2WPKH,signScript:n,signType:r.type,pubkeys:r.pubkeys,signatures:r.signatures,maxSignatures:r.maxSignatures}}const i=a.p2pkh({pubkey:t}).output;return{prevOutType:w.P2PKH,prevOutScript:i,hasWitness:!1,signScript:i,signType:w.P2PKH,pubkeys:[t],signatures:[void 0]}}(v,E,o,h);Object.assign(v,e)}if(!S(v))throw Error(v.prevOutType+" not supported")}let T;T=v.hasWitness?n.hashForWitnessV0(_,v.signScript,v.value,u):n.hashForSignature(_,v.signScript,u);return{input:v,ourPubKey:E,keyPair:s,signatureHash:T,hashType:u,useLowR:!!y}}(this.network,this.__INPUTS,this.__needsOutputs.bind(this),this.__TX,e,t,r,n,i,s,this.__USE_LOW_R))}__addInputUnsafe(e,t,r){if(f.Transaction.isCoinbaseHash(e))throw new Error("coinbase inputs not supported");const n=e.toString("hex")+":"+t;if(void 0!==this.__PREV_TX_SET[n])throw new Error("Duplicate TxOut: "+n);let i={};if(void 0!==r.script&&(i=function e(t,r,n,i){if(0===t.length&&0===r.length)return{};if(!n){let e=s.input(t,!0),i=s.witness(r,!0);e===w.NONSTANDARD&&(e=void 0),i===w.NONSTANDARD&&(i=void 0),n=e||i}switch(n){case w.P2WPKH:{const{output:e,pubkey:t,signature:n}=a.p2wpkh({witness:r});return{prevOutScript:e,prevOutType:w.P2WPKH,pubkeys:[t],signatures:[n]}}case w.P2PKH:{const{output:e,pubkey:r,signature:n}=a.p2pkh({input:t});return{prevOutScript:e,prevOutType:w.P2PKH,pubkeys:[r],signatures:[n]}}case w.P2PK:{const{signature:e}=a.p2pk({input:t});return{prevOutType:w.P2PK,pubkeys:[void 0],signatures:[e]}}case w.P2MS:{const{m:e,pubkeys:r,signatures:n}=a.p2ms({input:t,output:i},{allowIncomplete:!0});return{prevOutType:w.P2MS,pubkeys:r,signatures:n,maxSignatures:e}}}if(n===w.P2SH){const{output:n,redeem:i}=a.p2sh({input:t,witness:r}),o=s.output(i.output),u=e(i.input,i.witness,o,i.output);return u.prevOutType?{prevOutScript:n,prevOutType:w.P2SH,redeemScript:i.output,redeemScriptType:u.prevOutType,witnessScript:u.witnessScript,witnessScriptType:u.witnessScriptType,pubkeys:u.pubkeys,signatures:u.signatures}:{}}if(n===w.P2WSH){const{output:n,redeem:i}=a.p2wsh({input:t,witness:r}),o=s.output(i.output);let u;return(u=o===w.P2WPKH?e(i.input,i.witness,o):e(p.compile(i.witness),[],o,i.output)).prevOutType?{prevOutScript:n,prevOutType:w.P2WSH,witnessScript:i.output,witnessScriptType:u.prevOutType,pubkeys:u.pubkeys,signatures:u.signatures}:{}}return{prevOutType:w.NONSTANDARD,prevOutScript:t}}(r.script,r.witness||[])),void 0!==r.value&&(i.value=r.value),!i.prevOutScript&&r.prevOutScript){let e;if(!i.pubkeys&&!i.signatures){const t=g(r.prevOutScript);t.pubkeys&&(i.pubkeys=t.pubkeys,i.signatures=t.signatures),e=t.type}i.prevOutScript=r.prevOutScript,i.prevOutType=e||s.output(r.prevOutScript)}const o=this.__TX.addInput(e,t,r.sequence,r.scriptSig);return this.__INPUTS[o]=i,this.__PREV_TX_SET[n]=!0,o}__build(e){if(!e){if(!this.__TX.ins.length)throw new Error("Transaction has no inputs");if(!this.__TX.outs.length)throw new Error("Transaction has no outputs")}const t=this.__TX.clone();if(this.__INPUTS.forEach((r,n)=>{if(!r.prevOutType&&!e)throw new Error("Transaction is not complete");const i=function e(t,r,n){const i=r.pubkeys||[];let s=r.signatures||[];switch(t){case w.P2PKH:if(0===i.length)break;if(0===s.length)break;return a.p2pkh({pubkey:i[0],signature:s[0]});case w.P2WPKH:if(0===i.length)break;if(0===s.length)break;return a.p2wpkh({pubkey:i[0],signature:s[0]});case w.P2PK:if(0===i.length)break;if(0===s.length)break;return a.p2pk({signature:s[0]});case w.P2MS:{const e=r.maxSignatures;s=n?s.map(e=>e||h.OPS.OP_0):s.filter(e=>e);const t=!n||e===s.length;return a.p2ms({m:e,pubkeys:i,signatures:s},{allowIncomplete:n,validate:t})}case w.P2SH:{const t=e(r.redeemScriptType,r,n);if(!t)return;return a.p2sh({redeem:{output:t.output||r.redeemScript,input:t.input,witness:t.witness}})}case w.P2WSH:{const t=e(r.witnessScriptType,r,n);if(!t)return;return a.p2wsh({redeem:{output:r.witnessScript,input:t.input,witness:t.witness}})}}}(r.prevOutType,r,e);if(i)t.setInputScript(n,i.input),t.setWitness(n,i.witness);else{if(!e&&r.prevOutType===w.NONSTANDARD)throw new Error("Unknown input type");if(!e)throw new Error("Not enough information")}}),!e&&this.__overMaximumFees(t.virtualSize()))throw new Error("Transaction has absurd fees");return t}__canModifyInputs(){return this.__INPUTS.every(e=>!e.signatures||e.signatures.every(e=>{if(!e)return!0;return 0!==(_(e)&f.Transaction.SIGHASH_ANYONECANPAY)}))}__needsOutputs(e){return e===f.Transaction.SIGHASH_ALL?0===this.__TX.outs.length:0===this.__TX.outs.length&&this.__INPUTS.some(e=>!!e.signatures&&e.signatures.some(e=>{if(!e)return!1;return!(_(e)&f.Transaction.SIGHASH_NONE)}))}__canModifyOutputs(){const e=this.__TX.ins.length,t=this.__TX.outs.length;return this.__INPUTS.every(r=>void 0===r.signatures||r.signatures.every(r=>{if(!r)return!0;const n=31&_(r);return n===f.Transaction.SIGHASH_NONE||n===f.Transaction.SIGHASH_SINGLE&&e<=t}))}__overMaximumFees(e){return(this.__INPUTS.reduce((e,t)=>e+(t.value>>>0),0)-this.__TX.outs.reduce((e,t)=>e+t.value,0))/e>this.maximumFeeRate}}function g(e,t){l(d.Buffer,e);const r=s.output(e);switch(r){case w.P2PKH:{if(!t)return{type:r};const n=a.p2pkh({output:e}).hash,i=o.hash160(t);return n.equals(i)?{type:r,pubkeys:[t],signatures:[void 0]}:{type:r}}case w.P2WPKH:{if(!t)return{type:r};const n=a.p2wpkh({output:e}).hash,i=o.hash160(t);return n.equals(i)?{type:r,pubkeys:[t],signatures:[void 0]}:{type:r}}case w.P2PK:return{type:r,pubkeys:[a.p2pk({output:e}).pubkey],signatures:[void 0]};case w.P2MS:{const t=a.p2ms({output:e});return{type:r,pubkeys:t.pubkeys,signatures:t.pubkeys.map(()=>void 0),maxSignatures:t.m}}}return{type:r}}function S(e){return void 0!==e.signScript&&void 0!==e.signType&&void 0!==e.pubkeys&&void 0!==e.signatures&&e.signatures.length===e.pubkeys.length&&e.pubkeys.length>0&&(!1===e.hasWitness||void 0!==e.value)}function _(e){return e.readUInt8(e.length-1)}t.TransactionBuilder=y}).call(this,r("3be624f7e9dc58942c52").Buffer)},eb70bc5b37c6933481f8:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("c52e0ee7ccfeb64f9cf6"),i=r("c52e0ee7ccfeb64f9cf6");function s(e){return e===i.OPS.OP_0||n.isCanonicalScriptSignature(e)}function o(e,t){const r=n.decompile(e);return!(r.length<2)&&(r[0]===i.OPS.OP_0&&(t?r.slice(1).every(s):r.slice(1).every(n.isCanonicalScriptSignature)))}t.check=o,o.toJSON=(()=>"multisig input")},ebf61b4027142c40c33c:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("c52e0ee7ccfeb64f9cf6"),i=r("c52e0ee7ccfeb64f9cf6");function s(e){const t=n.compile(e);return 34===t.length&&t[0]===i.OPS.OP_0&&32===t[1]}t.check=s,s.toJSON=(()=>"Witness scriptHash output")},ee959e333f530563024f:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("c52e0ee7ccfeb64f9cf6"),i=r("c52e0ee7ccfeb64f9cf6");function s(e){const t=n.compile(e);return 23===t.length&&t[0]===i.OPS.OP_HASH160&&20===t[1]&&t[22]===i.OPS.OP_EQUAL}t.check=s,s.toJSON=(()=>"scriptHash output")},f21d93edd510689eb2ca:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const n=r("c52e0ee7ccfeb64f9cf6"),i=r("4982e4a9d5d9cc0006c5"),s=r("989ba8f7d369b0d9568d"),o=r("8a06de8a113371251a5d"),u=r("12fc7dc108ee22ef249d");function c(t,r){if(i(i.Array,t),t.length<1)return!1;const c=t[t.length-1];if(!e.isBuffer(c))return!1;const a=n.decompile(c);if(!a||0===a.length)return!1;const p=n.compile(t.slice(0,-1));return!(!u.input.check(p)||!u.output.check(a))||(!(!s.input.check(p,r)||!s.output.check(a))||!(!o.input.check(p)||!o.output.check(a)))}t.check=c,c.toJSON=(()=>"witnessScriptHash input")}).call(this,r("3be624f7e9dc58942c52").Buffer)},f49d9113a79536d617f0:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const n=r("beaf39890650aa5299f8"),i=r("beaf39890650aa5299f8"),s=r("2d6e5edc7083b0a69b78"),o=r("c52e0ee7ccfeb64f9cf6"),u=r("c52e0ee7ccfeb64f9cf6"),c=r("3b58bc5d4fd32db48dd3"),a=r("4982e4a9d5d9cc0006c5"),p=r("4a25c0f2b2142de6fa09");function h(e){const t=e.length;return p.encodingLength(t)+t}const f=e.allocUnsafe(0),d=[],l=e.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),w=e.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),b=e.from("ffffffffffffffff","hex"),m={script:f,valueBuffer:b};class y{constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}static fromBuffer(e,t){let r=0;function i(t){return r+=t,e.slice(r-t,r)}function s(){const t=e.readUInt32LE(r);return r+=4,t}function o(){const t=n.readUInt64LE(e,r);return r+=8,t}function u(){const t=p.decode(e,r);return r+=p.decode.bytes,t}function c(){return i(u())}function a(){const e=u(),t=[];for(let r=0;r<e;r++)t.push(c());return t}const h=new y;h.version=function(){const t=e.readInt32LE(r);return r+=4,t}();const f=e.readUInt8(r),l=e.readUInt8(r+1);let w=!1;f===y.ADVANCED_TRANSACTION_MARKER&&l===y.ADVANCED_TRANSACTION_FLAG&&(r+=2,w=!0);const b=u();for(let e=0;e<b;++e)h.ins.push({hash:i(32),index:s(),script:c(),sequence:s(),witness:d});const m=u();for(let e=0;e<m;++e)h.outs.push({value:o(),script:c()});if(w){for(let e=0;e<b;++e)h.ins[e].witness=a();if(!h.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(h.locktime=s(),t)return h;if(r!==e.length)throw new Error("Transaction has unexpected data");return h}static fromHex(t){return y.fromBuffer(e.from(t,"hex"),!1)}static isCoinbaseHash(e){a(c.Hash256bit,e);for(let t=0;t<32;++t)if(0!==e[t])return!1;return!0}isCoinbase(){return 1===this.ins.length&&y.isCoinbaseHash(this.ins[0].hash)}addInput(e,t,r,n){return a(c.tuple(c.Hash256bit,c.UInt32,c.maybe(c.UInt32),c.maybe(c.Buffer)),arguments),c.Null(r)&&(r=y.DEFAULT_SEQUENCE),this.ins.push({hash:e,index:t,script:n||f,sequence:r,witness:d})-1}addOutput(e,t){return a(c.tuple(c.Buffer,c.Satoshi),arguments),this.outs.push({script:e,value:t})-1}hasWitnesses(){return this.ins.some(e=>0!==e.witness.length)}weight(){return 3*this.__byteLength(!1)+this.__byteLength(!0)}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(){return this.__byteLength(!0)}clone(){const e=new y;return e.version=this.version,e.locktime=this.locktime,e.ins=this.ins.map(e=>({hash:e.hash,index:e.index,script:e.script,sequence:e.sequence,witness:e.witness})),e.outs=this.outs.map(e=>({script:e.script,value:e.value})),e}hashForSignature(t,r,n){if(a(c.tuple(c.UInt32,c.Buffer,c.Number),arguments),t>=this.ins.length)return w;const i=o.compile(o.decompile(r).filter(e=>e!==u.OPS.OP_CODESEPARATOR)),p=this.clone();if((31&n)===y.SIGHASH_NONE)p.outs=[],p.ins.forEach((e,r)=>{r!==t&&(e.sequence=0)});else if((31&n)===y.SIGHASH_SINGLE){if(t>=this.outs.length)return w;p.outs.length=t+1;for(let e=0;e<t;e++)p.outs[e]=m;p.ins.forEach((e,r)=>{r!==t&&(e.sequence=0)})}n&y.SIGHASH_ANYONECANPAY?(p.ins=[p.ins[t]],p.ins[0].script=i):(p.ins.forEach(e=>{e.script=f}),p.ins[t].script=i);const h=e.allocUnsafe(p.__byteLength(!1)+4);return h.writeInt32LE(n,h.length-4),p.__toBuffer(h,0,!1),s.hash256(h)}hashForWitnessV0(t,r,i,o){a(c.tuple(c.UInt32,c.Buffer,c.Satoshi,c.UInt32),arguments);let u=e.from([]),f=0;function d(e){f+=e.copy(u,f)}function w(e){f=u.writeUInt32LE(e,f)}function b(e){f=n.writeUInt64LE(u,e,f)}function m(e){var t;t=e.length,p.encode(t,u,f),f+=p.encode.bytes,d(e)}let g=l,S=l,_=l;if(o&y.SIGHASH_ANYONECANPAY||(u=e.allocUnsafe(36*this.ins.length),f=0,this.ins.forEach(e=>{d(e.hash),w(e.index)}),S=s.hash256(u)),o&y.SIGHASH_ANYONECANPAY||(31&o)===y.SIGHASH_SINGLE||(31&o)===y.SIGHASH_NONE||(u=e.allocUnsafe(4*this.ins.length),f=0,this.ins.forEach(e=>{w(e.sequence)}),_=s.hash256(u)),(31&o)!==y.SIGHASH_SINGLE&&(31&o)!==y.SIGHASH_NONE){const t=this.outs.reduce((e,t)=>e+8+h(t.script),0);u=e.allocUnsafe(t),f=0,this.outs.forEach(e=>{b(e.value),m(e.script)}),g=s.hash256(u)}else if((31&o)===y.SIGHASH_SINGLE&&t<this.outs.length){const r=this.outs[t];u=e.allocUnsafe(8+h(r.script)),f=0,b(r.value),m(r.script),g=s.hash256(u)}u=e.allocUnsafe(156+h(r)),f=0;const v=this.ins[t];return w(this.version),d(S),d(_),d(v.hash),w(v.index),m(r),b(i),w(v.sequence),d(g),w(this.locktime),w(o),s.hash256(u)}getHash(t){return t&&this.isCoinbase()?e.alloc(32,0):s.hash256(this.__toBuffer(void 0,void 0,t))}getId(){return i.reverseBuffer(this.getHash(!1)).toString("hex")}toBuffer(e,t){return this.__toBuffer(e,t,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(e,t){a(c.tuple(c.Number,c.Buffer),arguments),this.ins[e].script=t}setWitness(e,t){a(c.tuple(c.Number,[c.Buffer]),arguments),this.ins[e].witness=t}__byteLength(e){const t=e&&this.hasWitnesses();return(t?10:8)+p.encodingLength(this.ins.length)+p.encodingLength(this.outs.length)+this.ins.reduce((e,t)=>e+40+h(t.script),0)+this.outs.reduce((e,t)=>e+8+h(t.script),0)+(t?this.ins.reduce((e,t)=>e+function(e){const t=e.length;return p.encodingLength(t)+e.reduce((e,t)=>e+h(t),0)}(t.witness),0):0)}__toBuffer(t,r,i){t||(t=e.allocUnsafe(this.__byteLength(i)));let s=r||0;function o(e){s+=e.copy(t,s)}function u(e){s=t.writeUInt8(e,s)}function c(e){s=t.writeUInt32LE(e,s)}function a(e){p.encode(e,t,s),s+=p.encode.bytes}function h(e){a(e.length),o(e)}var f;f=this.version,s=t.writeInt32LE(f,s);const d=i&&this.hasWitnesses();return d&&(u(y.ADVANCED_TRANSACTION_MARKER),u(y.ADVANCED_TRANSACTION_FLAG)),a(this.ins.length),this.ins.forEach(e=>{o(e.hash),c(e.index),h(e.script),c(e.sequence)}),a(this.outs.length),this.outs.forEach(e=>{!function(e){return void 0!==e.value}(e)?o(e.valueBuffer):function(e){s=n.writeUInt64LE(t,e,s)}(e.value),h(e.script)}),d&&this.ins.forEach(e=>{!function(e){a(e.length),e.forEach(h)}(e.witness)}),c(this.locktime),void 0!==r?t.slice(r,s):t}}y.DEFAULT_SEQUENCE=4294967295,y.SIGHASH_ALL=1,y.SIGHASH_NONE=2,y.SIGHASH_SINGLE=3,y.SIGHASH_ANYONECANPAY=128,y.ADVANCED_TRANSACTION_MARKER=0,y.ADVANCED_TRANSACTION_FLAG=1,t.Transaction=y}).call(this,r("3be624f7e9dc58942c52").Buffer)}}]);